!function(a,b){this[a]||(this[a]=b(),"function"==typeof define&&(define.amd||define.cmd)?define(this[a]):"object"==typeof module&&(module.exports=this[a]))}("mqq",function(a){"use strict";function b(a,b){a=String(a).split("."),b=String(b).split(".");try{for(var c=0,d=Math.max(a.length,b.length);d>c;c++){var e=isFinite(a[c])&&Number(a[c])||0,f=isFinite(b[c])&&Number(b[c])||0;if(f>e)return-1;if(e>f)return 1}}catch(g){return-1}return 0}function c(a,b,c,d,e){if(a&&b&&c){var f,g,h,i,j=a+"://"+b+"/"+c;if(d=d||[],!e||!C[e]&&!window[e])for(e=null,g=0,h=d.length;h>g;g++)if(f=d[g],"object"==typeof f&&null!==f&&(f=f.callbackName||f.callback),f&&(C[f]||window[f])){e=f;break}e&&(D[e]={ns:b,method:c,uri:j,startTime:Date.now()},i=String(e).match(/__MQQ_CALLBACK_(\d+)/),i&&(D[i[1]]=D[e])),K.send(j,F)}}function d(a){var b=a.split("."),c=window;return b.forEach(function(a){!c[a]&&(c[a]={}),c=c[a]}),c}function e(a,b,c){if(a="function"==typeof a?a:window[a]){var d=f(a),e="__MQQ_CALLBACK_"+d;return window[e]=function(){var a=y.call(arguments);g(d,a,b,c)},e}}function f(a){var b=B++;return a&&(C[b]=a),b}function g(a,b,c,d){var e="function"==typeof a?a:C[a]||window[a],f=Date.now();if(b=b||[],"function"==typeof e?d?setTimeout(function(){e.apply(null,b)},0):e.apply(null,b):console.log("mqqapi: not found such callback: "+a),c&&(delete C[a],delete window["__MQQ_CALLBACK_"+a]),D[a]){var g=D[a];delete D[a],L({ns:g.ns,method:g.method,ret:JSON.stringify(b),url:g.uri}),Number(a)&&delete D["__MQQ_CALLBACK_"+a];var h,i,j,k=G,l=["retCode","retcode","resultCode","ret","code","r"];if(b.length)if(h=b[0],"object"==typeof h&&null!==h){for(i=0,j=l.length;j>i;i++)if(l[i]in h){k=h[l[i]];break}}else/^-?\d+$/.test(String(h))&&(k=h);K.send(g.uri+"#callback",k,f-g.startTime)}}function h(a){var b=y.call(arguments,1);w.android&&b&&b.length&&b.forEach(function(a,c){"object"==typeof a&&"r"in a&&"result"in a&&(b[c]=a.result)}),g(a,b)}function i(){}function j(a,b){var c=null,e=a.lastIndexOf("."),f=a.substring(0,e),g=a.substring(e+1),h=d(f);(!h[g]||w.debuging)&&(b.iOS&&w.iOS?c=b.iOS:b.android&&w.android?c=b.android:b.browser&&(c=b.browser),h[g]=c||i,E[a]=b.support)}function k(a){var b=E[a]||E[a.replace("qw.","mqq.").replace("qa.","mqq.")],c=w.iOS?"iOS":w.android?"android":"browser";if(!b||!b[c])return!1;var d=b[c].split("-");return 1===d.length?w.compare(d[0])>-1:w.compare(d[0])>-1&&w.compare(d[1])<1}function l(b,c,d,e){L({ns:c,method:d,url:b});var f=document.createElement("iframe");f.style.cssText="display:none;width:0px;height:0px;";var g=function(){h(e,{r:-201,result:"error"})};w.iOS&&(f.onload=g,f.src=b);var i=document.body||document.documentElement;i.appendChild(f),w.android&&(f.onload=g,f.src=b);var j=w.__RETURN_VALUE;return w.__RETURN_VALUE=a,setTimeout(function(){f.parentNode.removeChild(f)},0),j}function m(a){return w.iOS?!0:w.android&&w.__supportAndroidNewJSBridge?H[a]&&w.compare(H[a])<0?!1:!0:!1}function n(b,d,e,h){if(!b||!d)return null;var i,j;if(e=y.call(arguments,2),h=e.length&&e[e.length-1],h&&"function"==typeof h?e.pop():"undefined"==typeof h?e.pop():h=null,j=f(h),J.indexOf(d)>-1||"pbReport"===d&&e[e.length-1]===!0?e.pop():c("jsbridge",b,d,e,j),w.android&&!w.__supportAndroidJSBridge)if(window[b]&&window[b][d]){var k=window[b][d].apply(window[b],e);if(!h)return k;g(j,[k])}else h&&g(j,[w.ERROR_NO_SUCH_METHOD]);else if(m(b,d)){i="jsbridge://"+encodeURIComponent(b)+"/"+encodeURIComponent(d),e.forEach(function(a,b){"object"==typeof a&&(a=JSON.stringify(a)),i+=0===b?"?p=":"&p"+b+"=",i+=encodeURIComponent(String(a))}),"pbReport"===d||(i+="#"+j);var n=l(i,b,d);if(w.iOS&&n!==a&&n.result!==a){if(!h)return n.result;g(j,[n.result],!1,!0)}}else w.android&&(i="jsbridge://"+encodeURIComponent(b)+"/"+encodeURIComponent(d)+"/"+j,e.forEach(function(a){"object"==typeof a&&(a=JSON.stringify(a)),i+="/"+encodeURIComponent(String(a))}),l(i,b,d,j));return null}function o(a,b,d,f,g){if(!a||!b||!d)return null;var h,i=y.call(arguments);"function"==typeof i[i.length-1]?(g=i[i.length-1],i.pop()):g=null,f=4===i.length?i[i.length-1]:{},g&&(f.callback_type="javascript",h=e(g),f.callback_name=h),f.src_type=f.src_type||"web",f.version||(f.version=1);var j=a+"://"+encodeURIComponent(b)+"/"+encodeURIComponent(d)+"?"+q(f);l(j,b,d),c(a,b,d,i,h)}function p(a){var b,c,d,e=a.indexOf("?"),f=a.substring(e+1).split("&"),g={};for(b=0;b<f.length;b++)e=f[b].indexOf("="),c=f[b].substring(0,e),d=f[b].substring(e+1),g[c]=decodeURIComponent(d);return g}function q(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(String(c))+"="+encodeURIComponent(String(a[c])));return b.join("&")}function r(a,b){var c=document.createElement("a");c.href=a;var d;return c.search&&(d=p(String(c.search).substring(1)),b.forEach(function(a){delete d[a]}),c.search="?"+q(d)),c.hash&&(d=p(String(c.hash).substring(1)),b.forEach(function(a){delete d[a]}),c.hash="#"+q(d)),a=c.href,c=null,a}function s(a,b){if("qbrowserVisibilityChange"===a)return document.addEventListener(a,b,!1),!0;var c="evt-"+a;return(C[c]=C[c]||[]).push(b),!0}function t(a,b){var c="evt-"+a,d=C[c],e=!1;if(!d)return!1;if(!b)return delete C[c],!0;for(var f=d.length-1;f>=0;f--)b===d[f]&&(d.splice(f,1),e=!0);return e}function u(a){var b="evt-"+a,c=C[b],d=y.call(arguments,1);c&&c.forEach(function(a){g(a,d,!1,!0)})}function v(a,b,d){var e={event:a,data:b||{},options:d||{}};w.android&&e.options.broadcast===!1&&w.compare("5.2")<=0&&(e.options.domains=["localhost"],e.options.broadcast=!0);var f="jsbridge://event/dispatchEvent?p="+encodeURIComponent(JSON.stringify(e)||"");l(f,"event","dispatchEvent"),c("jsbridge","event","dispatchEvent")}var w={},x=navigator.userAgent,y=Array.prototype.slice,z=/(iPad|iPhone|iPod).*? (IPad)?QQ\/([\d\.]+)/,A=/\bV1_AND_SQI?_([\d\.]+)(.*? QQ\/([\d\.]+))?/,B=1,C={},D={},E={},F=-1e5,G=-2e5,H={qbizApi:"5.0",pay:"999999",SetPwdJsInterface:"999999",GCApi:"999999",q_download:"999999",qqZoneAppList:"999999",qzone_app:"999999",qzone_http:"999999",qzone_imageCache:"999999",RoamMapJsPlugin:"999999"},I=document.getElementById("mqq_firebug_logs")||!1,J=["popBack","close"];I?(w.debuging=!0,x=I.value):w.debuging=!1,w.iOS=z.test(x),w.android=A.test(x),w.iOS&&w.android&&(w.iOS=!1),w.version="20150204003",w.QQVersion="0",w.ERROR_NO_SUCH_METHOD="no such method",w.ERROR_PERMISSION_DENIED="permission denied",w.android||w.iOS||console.log("mqqapi: not android or ios"),w.compare=function(a){return b(w.QQVersion,a)},w.android&&(w.QQVersion=function(a){return a&&a[1]||0}(x.match(A)),window.JsBridge||(window.JsBridge={}),window.JsBridge.callMethod=n,window.JsBridge.callback=h,window.JsBridge.compareVersion=w.compare),w.iOS&&(window.iOSQQApi=w,w.__RETURN_VALUE=a,w.QQVersion=function(a){return a&&a[3]||0}(x.match(z))),w.platform=w.iOS?"IPH":w.android?"AND":"OTH";var K=function(){function a(){var b=c;if(c=[],e=0,b.length){var f={};if(f.appid=g,f.typeid=h,f.releaseversion=k,f.sdkversion=w.version,f.qua=l,f.frequency=i,f.t=Date.now(),f.key=["commandid","resultcode","tmcost"].join(","),b.forEach(function(a,b){f[b+1+"_1"]=a[0],f[b+1+"_2"]=a[1],f[b+1+"_3"]=a[2]}),f=new String(q(f)),w.compare("4.6")>=0)setTimeout(function(){mqq.iOS?mqq.invoke("data","pbReport",{type:String(10004),data:f},!0):mqq.invoke("publicAccount","pbReport",String(10004),f,!0)},0);else{var j=new Image;j.onload=function(){j=null},j.src="http://wspeed.qq.com/w.cgi?"+f}e=setTimeout(a,d)}}function b(b,g,h){if(g===F){g=0;var j=Math.round(Math.random()*i)%i;if(1!==j)return}c.push([b,g||0,h||0]),e||(f=Date.now(),e=setTimeout(a,d))}var c=[],d=500,e=0,f=0,g=1000218,h=1000280,i=20,j=String(w.QQVersion).split(".").slice(0,3).join("."),k=w.platform+"_MQQ_"+j,l=w.platform+w.QQVersion+"/"+w.version;return{send:b}}(),L=function(){if(I){var a=document.createEvent("Event");a.initEvent("mqq2chrome",!0,!0)}return function(b){if(w.debuging&&"pbReport"!==b.method)if(mqq.firebug&&mqq.firebug.log)try{mqq.firebug.log(b)}catch(c){}else I&&(I.value=JSON.stringify(b),I.dispatchEvent(a))}}();return w.__androidForSamsung=/_NZ\b/.test(x),w.__supportAndroidJSBridge=w.android&&(w.compare("4.5")>-1||w.__androidForSamsung),w.__supportAndroidNewJSBridge=w.android&&w.compare("4.7.2")>-1,w.__aCallbacks=C,w.__aReports=D,w.__aSupports=E,w.__fireCallback=g,w.__reportAPI=c,w.build=j,w.support=k,w.invoke=n,w.invokeSchema=o,w.callback=e,w.execGlobalCallback=h,w.mapQuery=p,w.toQuery=q,w.removeQuery=r,w.addEventListener=s,w.removeEventListener=t,w.execEventCallback=u,w.dispatchEvent=v,w}),function(){"use strict";function a(a,b,d){return d?function(){var d=[a,b].concat(c.call(arguments));mqq.invoke.apply(mqq,d)}:function(){var d=c.call(arguments),e=null;d.length&&"function"==typeof d[d.length-1]&&(e=d[d.length-1],d.pop());var f=k[a][b].apply(k[a],d);return e?void e(f):f}}function b(b,c){if(c=c||1,mqq.compare(c)<0)return void console.info("jsbridge: version not match, apis ignored");for(var d in b){var e=b[d];if(e&&e.length&&Array.isArray(e)){var f=window[d];if(f)"object"==typeof f&&f.getClass&&(k[d]=f,window[d]={});else{if(!j)continue;window[d]={}}var g=k[d];f=window[d];for(var h=0,i=e.length;i>h;h++){var l=e[h];f[l]||(g?g[l]&&(f[l]=a(d,l,!1)):f[l]=a(d,l,!0))}}}}var c=Array.prototype.slice,d={QQApi:["isAppInstalled","isAppInstalledBatch","startAppWithPkgName","checkAppInstalled","checkAppInstalledBatch","getOpenidBatch","startAppWithPkgNameAndOpenId"]},e={QQApi:["lauchApp"]},f={publicAccount:["close","getJson","getLocation","hideLoading","openInExternalBrowser","showLoading","viewAccount"]},g={publicAccount:["getMemberCount","getNetworkState","getValue","open","openEmoji","openUrl","setRightButton","setValue","shareMessage","showDialog"],qqZoneAppList:["getCurrentVersion","getSdPath","getWebDisplay","goUrl","openMsgCenter","showDialog","setAllowCallBackEvent"],q_download:["doDownloadAction","getQueryDownloadAction","registerDownloadCallBackListener","cancelDownload","cancelNotification"],qzone_http:["httpRequest"],qzone_imageCache:["downloadImage","getImageRootPath","imageIsExist","sdIsMounted","updateImage","clearImage"],qzone_app:["getAllDownAppInfo","getAppInfo","getAppInfoBatch","startSystemApp","uninstallApp"]},h={coupon:["addCoupon","addFavourBusiness","gotoCoupon","gotoCouponHome","isCouponValid","isFavourBusiness","isFavourCoupon","removeFavourBusiness"]},i=navigator.userAgent,j=mqq.__supportAndroidJSBridge,k={};window.JsBridge||(window.JsBridge={}),window.JsBridge.restoreApis=b,b(d),b(e,"4.5"),j?/\bPA\b/.test(i)||mqq.compare("4.6")>=0?(b(f),b(g,"4.5"),b(h,"4.5")):/\bQR\b/.test(i)&&(b(h,"4.5"),mqq.compare("4.5")>=0&&mqq.compare("4.6")<0&&(window.publicAccount={openUrl:function(a){location.href=a}})):b(f,"4.2")}(),mqq.build("mqq.app.checkAppInstalled",{android:function(a,b){mqq.invoke("QQApi","checkAppInstalled",a,b)},support:{android:"4.2"}}),mqq.build("mqq.app.checkAppInstalledBatch",{android:function(a,b){a=a.join("|"),mqq.invoke("QQApi","checkAppInstalledBatch",a,function(a){a=(a||"").split("|"),b(a)})},support:{android:"4.2"}}),mqq.build("mqq.app.downloadApp",{android:function(){var a,b={},c=0,d=function(a){if(c>0){var d,e,f=0,g=a.length;if("object"==typeof a&&g)for(;d=a[f];f++)(e=b[d.appid])&&e(d);else(e=b[a.appid])&&e(a)}};return function(e,f){!a&&f&&(a=!0,mqq.invoke("q_download","registerDownloadCallBackListener",mqq.callback(d))),f&&"function"==typeof f&&(c++,b[e.appid]=f),mqq.invoke("q_download","doDownloadAction",e)}}(),support:{android:"4.5"}}),mqq.build("mqq.app.isAppInstalled",{iOS:function(a,b){return mqq.invoke("app","isInstalled",{scheme:a},b)},android:function(a,b){mqq.invoke("QQApi","isAppInstalled",a,b)},support:{iOS:"4.2",android:"4.2"}}),mqq.build("mqq.app.isAppInstalledBatch",{iOS:function(a,b){return mqq.invoke("app","batchIsInstalled",{schemes:a},b)},android:function(a,b){a=a.join("|"),mqq.invoke("QQApi","isAppInstalledBatch",a,function(a){var c=[];a=(a+"").split("|");for(var d=0;d<a.length;d++)c.push(1===parseInt(a[d]));b(c)})},support:{iOS:"4.2",android:"4.2"}}),mqq.build("mqq.app.launchApp",{iOS:function(a){mqq.invokeSchema(a.name,"app","launch",a)},android:function(a){mqq.invoke("QQApi","startAppWithPkgName",a.name)},support:{iOS:"4.2",android:"4.2"}}),mqq.build("mqq.app.launchAppWithTokens",{iOS:function(a,b){return"object"==typeof a?mqq.invoke("app","launchApp",a):mqq.invoke("app","launchApp",{appID:a,paramsStr:b})},android:function(a){mqq.compare("5.2")>=0?mqq.invoke("QQApi","launchAppWithTokens",a):mqq.compare("4.6")>=0?mqq.invoke("QQApi","launchAppWithTokens",a.appID,a.paramsStr,a.packageName,a.flags||a.falgs||0):mqq.invoke("QQApi","launchApp",a.appID,a.paramsStr,a.packageName)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.app.sendFunnyFace",{iOS:function(a){mqq.invoke("app","sendFunnyFace",a)},android:function(a){mqq.invoke("qbizApi","sendFunnyFace",a.type,a.sessionType,a.gcode,a.guin,a.faceID)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.coupon.addCoupon",{iOS:function(a,b,c,d,e){if("object"==typeof a){var f=a;(f.callback=mqq.callback(b))&&mqq.invoke("coupon","addCoupon",f)}else"function"==typeof d&&(e=d,d=""),mqq.invoke("coupon","addCoupon",{bid:a,cid:b,sourceId:c,city:d||"",callback:mqq.callback(e)})},android:function(a,b){var c=mqq.callback(b,!0);mqq.invoke("coupon","addCoupon",a.bid,a.sourceId,a.cid,c)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.coupon.addFavourBusiness",{iOS:function(a,b,c){if("object"==typeof a){var d=a;(d.callback=mqq.callback(b))&&mqq.invoke("coupon","addFavourBusiness",d)}else mqq.invoke("coupon","addFavourBusiness",{bid:a,sourceId:b,callback:mqq.callback(c)})},android:function(a,b){var c=mqq.callback(b,!0);mqq.invoke("coupon","addFavourBusiness",a.bid,a.sourceId,c)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.coupon.goToCouponHomePage",{iOS:function(a){mqq.invoke("coupon","goToCouponHomePage",{params:a})},android:function(a){a=JSON.stringify(a||{}),mqq.invoke("coupon","goToCouponHomePage",a)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.coupon.isFavourBusiness",{iOS:function(a,b,c){if("object"==typeof a){var d=a;(d.callback=mqq.callback(b))&&mqq.invoke("coupon","isFavourBusiness",d)}else mqq.invoke("coupon","isFavourBusiness",{bid:a,sourceId:b,callback:mqq.callback(c)})},android:function(a,b){mqq.invoke("coupon","isFavourBusiness",a.bid,a.sourceId,b)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.coupon.isFavourCoupon",{iOS:function(a,b,c,d){if("object"==typeof a){var e=a;(e.callback=mqq.callback(b))&&mqq.invoke("coupon","isFavourCoupon",e)}else mqq.invoke("coupon","isFavourCoupon",{bid:a,cid:b,sourceId:c,callback:mqq.callback(d)})},android:function(a,b){mqq.invoke("coupon","isFavourCoupon",a.bid,a.cid,a.sourceId,b)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.coupon.removeCoupon",{iOS:function(a,b,c,d){if("object"==typeof a){var e=a;(e.callback=mqq.callback(b))&&mqq.invoke("coupon","removeCoupon",e)}else mqq.invoke("coupon","removeCoupon",{bid:a,cid:b,sourceId:c,callback:mqq.callback(d)})},support:{iOS:"4.6"}}),mqq.build("mqq.coupon.removeFavourBusiness",{iOS:function(a,b,c){if("object"==typeof a){var d=a;(d.callback=mqq.callback(b))&&mqq.invoke("coupon","removeFavourBusiness",d)}else mqq.invoke("coupon","removeFavourBusiness",{bid:a,sourceId:b,callback:mqq.callback(c)})},android:function(a,b){var c=mqq.callback(b,!0);mqq.invoke("coupon","removeFavourBusiness",a.bid,a.sourceId,c)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.data.batchFetchOpenID",{iOS:function(a,b){var c=a.appIDs;mqq.data.fetchJson({url:"http://cgi.connect.qq.com/api/get_openids_by_appids",params:{appids:JSON.stringify(c)}},b)},android:function(a,b){var c=a.appIDs;mqq.data.fetchJson({url:"http://cgi.connect.qq.com/api/get_openids_by_appids",params:{appids:JSON.stringify(c)}},b)},support:{iOS:"4.5",android:"4.6"}}),mqq.build("mqq.data.deleteH5Data",{iOS:function(a,b){var c=b?mqq.callback(b):null;mqq.invoke("data","deleteWebviewBizData",{callback:c,params:a})},android:function(a,b){a=JSON.stringify(a||{}),mqq.invoke("publicAccount","deleteH5Data",a,mqq.callback(b,!0))},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.data.deleteH5DataByHost",{iOS:function(a,b){var c=b?mqq.callback(b):null;mqq.invoke("data","deleteWebviewBizData",{callback:c,delallhostdata:1,params:a})},android:function(a,b){a=JSON.stringify(a||{}),mqq.invoke("publicAccount","deleteH5DataByHost",a,mqq.callback(b,!0))},support:{iOS:"4.6",android:"4.6"}}),function(){function a(){return"UID_"+ ++c}var b={},c=1;window.clientCallback=function(a,c){var d=b[c];if(!d)return void console.log("this getJson no callbackToken!");if(d.callback){if(clearTimeout(d.timer),"string"==typeof a)try{a=JSON.parse(a)}catch(e){a=null}d.callback(a,d.context||window,200),d.callback=null}},mqq.build("mqq.data.fetchJson",{iOS:function(a,b){var c=a.url,d=a.params||{},e=a.options||{},f=a.context;d._t=+new Date;var g=b?mqq.callback(function(a,c,d){if("string"==typeof a)try{a=JSON.parse(a)}catch(e){a=null}b(a,c,d)},!0,!0):null;mqq.invoke("data","fetchJson",{method:e.method||"GET",timeout:e.timeout||-1,options:e,url:c,params:mqq.toQuery(d),callback:g,context:JSON.stringify(f)})},android:function(c,d){var e=c.options||{},f=e.method||"GET",g={param:c.params,method:f};g=JSON.stringify(g);var h=a();c.callback=d,b[h]=c,e.timeout&&(c.timer=setTimeout(function(){c.callback&&(c.callback("timeout",c.context||window,0),c.callback=null)},e.timeout)),mqq.invoke("publicAccount","getJson",c.url,g,"",h)},support:{iOS:"4.5",android:"4.6"}})}(),mqq.build("mqq.data.getClipboard",{iOS:function(a){var b={},c=mqq.invoke("data","getClipboard",b);a&&a(c)},android:function(a){var b={};a&&(b.callback=mqq.callback(a)),mqq.invoke("data","getClipboard",b)},support:{iOS:"4.7.2",android:"4.7.2"}}),function(){var a=function(a){return function(b){a(b.friends||[])}},b=function(b,c){c&&(b.callback=mqq.callback(a(c),!1,!0)),mqq.invoke("qw_data","getFriendInfo",b)};mqq.build("mqq.data.getFriendInfo",{iOS:b,android:b,support:{iOS:"5.1.0",android:"5.1.0"}})}(),mqq.build("mqq.data.getPageLoadStamp",{iOS:function(a){mqq.invoke("data","getPageLoadStamp",{callback:mqq.callback(a)})},android:function(a){mqq.invoke("publicAccount","getPageLoadStamp",mqq.callback(a))},support:{iOS:"4.6",android:"4.6"}}),function(){var a=function(a){return function(b){if(mqq.android&&b&&void 0===b.result){try{b=JSON.parse(b)}catch(c){}b={result:0,data:b,message:"成功"}}a(b)}},b=function(b){if(mqq.compare("4.7.1")>=0)mqq.invoke("qw_data","getPerformance",a(b));else try{common.getPerformance(a(b))}catch(c){b({result:-1,message:"该接口在手Q v4.7.1 或以上才支持！",data:null})}};mqq.build("mqq.data.getPerformance",{iOS:b,android:b,support:{iOS:"4.7.1",android:"4.7.1"}})}(),mqq.build("mqq.data.getUrlImage",{iOS:function(a,b){var c=b?mqq.callback(b,!1,!0):null;mqq.invoke("data","getUrlImage",{callback:c,params:a})},android:function(a,b){a=JSON.stringify(a||{}),mqq.invoke("publicAccount","getUrlImage",a,mqq.callback(b))},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.data.getUserInfo",{iOS:function(a){return mqq.invoke("data","userInfo",a)},android:function(a){mqq.invoke("data","userInfo",{callback:mqq.callback(a)})},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.data.isFollowUin",{iOS:function(a,b){a.callback=mqq.callback(b),mqq.invoke("data","isFollowUin",a)},android:function(a,b){mqq.invoke("publicAccount","isFollowUin",a,mqq.callback(b))},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.data.pbReport",{iOS:function(a,b){mqq.invoke("data","pbReport",{type:String(a),data:b})},android:function(a,b){mqq.invoke("publicAccount","pbReport",String(a),b)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.data.readH5Data",{iOS:function(a,b){var c=b?mqq.callback(b):null;mqq.invoke("data","readWebviewBizData",{callback:c,params:a})},android:function(a,b){a=JSON.stringify(a||{}),mqq.invoke("publicAccount","readH5Data",a,mqq.callback(function(a){if(a&&a.response&&a.response.data){var c=a.response.data;c=c.replace(/\\/g,""),c=decodeURIComponent(c),a.response.data=c}b(a)},!0))},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.data.sendRequest",{iOS:function(a,b){var c=a.url,d=a.params,e=a.options||{},f=a.context;d._t=+new Date,mqq.invoke("data","fetchJson",{method:e.method||"GET",options:e,url:c,params:mqq.toQuery(d),callback:mqq.callback(b),context:JSON.stringify(f)})},android:function(a,b){a.callback=mqq.callback(b),mqq.invoke("data","sendRequest",a)},support:{iOS:"4.5",android:"4.7"}}),mqq.build("mqq.data.setClipboard",{iOS:function(a,b){mqq.invoke("data","setClipboard",a),b&&b(!0)},android:function(a,b){b&&(a.callback=mqq.callback(b)),mqq.invoke("data","setClipboard",a)},support:{iOS:"4.7.2",android:"4.7.2"}}),mqq.build("mqq.data.setShareInfo",{iOS:function(a,b){return a.share_url&&(a.share_url=mqq.removeQuery(a.share_url,["sid","3g_sid"])),a.desc&&(a.desc=a.desc.length>50?a.desc.substring(0,50)+"...":a.desc),mqq.invoke("data","setShareInfo",{params:a},b)},android:function(a,b){a.share_url&&(a.share_url=mqq.removeQuery(a.share_url,["sid","3g_sid"])),a.desc&&(a.desc=a.desc.length>50?a.desc.substring(0,50)+"...":a.desc),mqq.invoke("QQApi","setShareInfo",a,b)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.data.setShareURL",{iOS:function(a,b){a.url&&(a.url=mqq.removeQuery(a.url,["sid","3g_sid"])),mqq.invoke("data","setShareURL",a,b)},android:function(a,b){a.url&&(a.url=mqq.removeQuery(a.url,["sid","3g_sid"])),mqq.compare("4.6")<0?b(!1):mqq.invoke("QQApi","setShareURL",a.url,b)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.data.shareRichMessage",{iOS:function(a,b){a=a||{},a.callback=mqq.callback(b),mqq.invoke("nav","officalAccountShareRichMsg2QQ",a)},android:function(a,b){a=a||{},a.callback=mqq.callback(b),mqq.invoke("publicAccount","officalAccountShareRichMsg2QQ",a)}}),mqq.build("mqq.data.startSyncData",{iOS:function(a,b){var c=mqq.callback(b);c&&(a.callback=c,mqq.invoke("data","startSyncData",a))},android:function(a,b){var c=mqq.callback(b);mqq.invoke("qbizApi","startSyncData",a.appID,c)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.data.stopSyncData",{iOS:function(a){mqq.invoke("data","stopSyncData",a)},android:function(a){mqq.invoke("qbizApi","stopSyncData",a.appID,name)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.data.writeH5Data",{iOS:function(a,b){var c=mqq.callback(b||function(){}),d=a.data;d&&"object"==typeof d&&(a.data=JSON.stringify(d)),mqq.invoke("data","writeWebviewBizData",{callback:c,params:a})},android:function(a,b){var c=a.data;c&&("object"==typeof c&&(c=JSON.stringify(c)),a.data=encodeURIComponent(c)),mqq.invoke("publicAccount","writeH5Data",a,mqq.callback(b||function(){},!0))},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.debug.hide",{iOS:function(a){return mqq.compare("4.7.1")>=0?(null==a&&(a=!0),mqq.invoke("qw_debug","hide",{flag:a})):void 0},android:function(a){return mqq.compare("4.7.1")>=0?(null==a&&(a=!0),mqq.invoke("qw_debug","hide",{flag:a})):void 0},support:{iOS:"4.7.1",android:"4.7.1"}}),mqq.build("mqq.debug.log",{iOS:function(a){var b="",c=function(a){return null===a?"null":void 0===a?"undefined":Object.prototype.toString.call(a).slice(8,-1).toLowerCase()},d=c(a);return b="function"===d?a.toString():"string"===d?a:"array"===d?"["+a.join()+"]":JSON.stringify(a),mqq.compare("4.7.1")>=0?mqq.invoke("qw_debug","log",{msg:b}):void 0},android:function(a){var b="",c=function(a){return null===a?"null":void 0===a?"undefined":Object.prototype.toString.call(a).slice(8,-1).toLowerCase()},d=c(a);b="function"===d?a.toString():"string"===d?a:"array"===d?"["+a.join()+"]":JSON.stringify(a),mqq.compare("4.7.1")>=0&&mqq.invoke("qw_debug","log",{msg:b})},support:{iOS:"4.7.1",android:"4.7.1"}}),mqq.build("mqq.debug.show",{iOS:function(a){return mqq.compare("4.7.1")>=0?(null==a&&(a=!0),mqq.invoke("qw_debug","show",{flag:a})):void 0},android:function(a){mqq.compare("4.7.1")>=0&&(null==a&&(a=!0),mqq.invoke("qw_debug","show",{flag:a}))},support:{iOS:"4.7.1",android:"4.7.1"}}),mqq.build("mqq.debug.start",{iOS:function(){return mqq.compare("4.7.1")>=0?mqq.invoke("qw_debug","start"):void 0},android:function(){mqq.compare("4.7.1")>=0&&mqq.invoke("qw_debug","start")},support:{iOS:"4.7.1",android:"4.7.1"}}),mqq.build("mqq.debug.stop",{iOS:function(){return mqq.compare("4.7.1")>=0?mqq.invoke("qw_debug","stop"):void 0},android:function(){mqq.compare("4.7.1")>=0&&mqq.invoke("qw_debug","stop")},support:{iOS:"4.7.1",android:"4.7.1"}}),mqq.build("mqq.device.connectToWiFi",{iOS:function(a,b){b&&b(mqq.ERROR_NO_SUCH_METHOD)},android:function(a,b){a.callback=mqq.callback(b),a.callback&&mqq.compare("5.1")>=0&&mqq.compare("5.4")<0&&(a.callback="javascript:"+a.callback),mqq.invoke("qbizApi","connectToWiFi",a)},support:{android:"4.7"}}),mqq.build("mqq.device.qqVersion",{iOS:function(a){return mqq.invoke("device","qqVersion",a)},support:{iOS:"4.5"}}),mqq.build("mqq.device.qqBuild",{iOS:function(a){return mqq.invoke("device","qqBuild",a)},support:{iOS:"4.5"}}),mqq.build("mqq.device.getClientInfo",{iOS:function(a){var b={qqVersion:this.qqVersion(),qqBuild:this.qqBuild()},c=mqq.callback(a,!1,!0);return mqq.__reportAPI("web","device","getClientInfo",null,c),"function"!=typeof a?b:void mqq.__fireCallback(c,[b])},android:function(a){if(mqq.compare("4.6")>=0){var b=a;a=function(a){try{a=JSON.parse(a)}catch(c){}b&&b(a)},mqq.invoke("qbizApi","getClientInfo",a)}else mqq.__reportAPI("web","device","getClientInfo"),a({qqVersion:mqq.QQVersion,qqBuild:function(a){return a=a&&a[1]||0,a&&a.slice(a.lastIndexOf(".")+1)||0}(navigator.userAgent.match(/\bqq\/([\d\.]+)/i))})},support:{iOS:"4.5",android:"4.6"}}),mqq.build("mqq.device.systemName",{iOS:function(a){return mqq.invoke("device","systemName",a)},support:{iOS:"4.5"}}),mqq.build("mqq.device.systemVersion",{iOS:function(a){return mqq.invoke("device","systemVersion",a)},support:{iOS:"4.5"}}),mqq.build("mqq.device.model",{iOS:function(a){return mqq.invoke("device","model",a)},support:{iOS:"4.5"}}),mqq.build("mqq.device.modelVersion",{iOS:function(a){return mqq.invoke("device","modelVersion",a)},support:{iOS:"4.5"}}),mqq.build("mqq.device.getDeviceInfo",{iOS:function(a){if(mqq.compare(4.7)>=0)return mqq.invoke("device","getDeviceInfo",a);var b=mqq.callback(a,!1,!0);mqq.__reportAPI("web","device","getClientInfo",null,b);var c={isMobileQQ:this.isMobileQQ(),systemName:this.systemName(),systemVersion:this.systemVersion(),model:this.model(),modelVersion:this.modelVersion()};return"function"!=typeof a?c:void mqq.__fireCallback(b,[c])},android:function(a){if(mqq.compare("4.6")>=0){var b=a;a=function(a){try{a=JSON.parse(a)}catch(c){}b&&b(a)},mqq.invoke("qbizApi","getDeviceInfo",a)}else{var c=navigator.userAgent;mqq.__reportAPI("web","device","getClientInfo"),a({isMobileQQ:!0,systemName:"android",systemVersion:function(a){return a&&a[1]||0}(c.match(/\bAndroid ([\d\.]+)/i)),model:function(a){return a&&a[1]||null}(c.match(/;\s([^;]+)\s\bBuild\/\w+/i))})}},support:{iOS:"4.5",android:"4.5"}}),function(){function a(a,c){"string"==typeof a&&/^{.*?}$/.test(a)&&(a=JSON.parse(a)),a&&"radio"in a&&(a.radio=1===a.type?"wifi":a.type>=2?b[a.radio]||"unknown":"unknown"),c&&c(a)}var b={CTRadioAccessTechnologyGPRS:"gprs",CTRadioAccessTechnologyEdge:"edge",CTRadioAccessTechnologyWCDMA:"wcdma",CTRadioAccessTechnologyHSDPA:"hsdpa",CTRadioAccessTechnologyCDMA1x:"cdma",CTRadioAccessTechnologyCDMAEVDORev0:"evdo0",CTRadioAccessTechnologyCDMAEVDORevA:"evdoa",CTRadioAccessTechnologyCDMAEVDORevB:"evdob",CTRadioAccessTechnologyeHRPD:"ehrpd",CTRadioAccessTechnologyLTE:"lte",NETWORK_TYPE_GPRS:"gprs",NETWORK_TYPE_EDGE:"edge",NETWORK_TYPE_CDMA:"cdma",NETWORK_TYPE_1xRTT:"1xrtt",NETWORK_TYPE_EVDO_0:"evdo0",NETWORK_TYPE_EVDO_A:"evdoa",NETWORK_TYPE_EVDO_B:"evdob",NETWORK_TYPE_IDEN:"iden",NETWORK_TYPE_UMTS:"umts",NETWORK_TYPE_HSDPA:"hsdpa",NETWORK_TYPE_HSUPA:"hsupa",NETWORK_TYPE_HSPA:"hspa",NETWORK_TYPE_EHRPD:"ehrpd",NETWORK_TYPE_HSPAP:"hspap",NETWORK_TYPE_LTE:"lte",NETWORK_TYPE_WIFI:"wifi",NETWORK_TYPE_UNKNOWN:"unknown"};mqq.build("mqq.device.getNetworkInfo",{iOS:function(b){mqq.invoke("device","getNetworkInfo",{callback:mqq.callback(function(c){a(c,b)},!1,!0)})},android:function(b){mqq.invoke("qbizApi","getNetworkInfo",function(c){a(c,b)})},support:{iOS:"5.2",android:"5.2"}})}(),mqq.build("mqq.device.getNetworkType",{iOS:function(a){var b=mqq.invoke("device","networkStatus");return b=Number(b),"function"!=typeof a?b:void mqq.__fireCallback(a,[b],!1,!0)},android:function(a){mqq.compare("4.6")>=0?mqq.invoke("qbizApi","getNetworkType",a):mqq.invoke("publicAccount","getNetworkState",function(b){var c={"-1":0,0:3,1:1},d=b in c?c[b]:4;a(d)})},support:{iOS:"4.5",android:"4.6"}}),mqq.build("mqq.device.networkStatus",{iOS:mqq.device.getNetworkType,support:{iOS:"4.5"}}),mqq.build("mqq.device.networkType",{iOS:mqq.device.getNetworkType,support:{iOS:"4.5"}}),mqq.build("mqq.device.getWebViewType",{iOS:function(a){return mqq.invoke("device","webviewType",a)},android:function(a){var b=1,c=navigator.userAgent;return/\bPA\b/.test(c)?(b=5,/\bCoupon\b/.test(c)?b=2:/\bMyCoupon\b/.test(c)&&(b=3)):/\bQR\b/.test(c)&&(b=4),mqq.__reportAPI("web","device","getWebViewType"),a?a(b):b},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.device.webviewType",{iOS:mqq.device.getWebViewType,support:{iOS:"4.6"}}),mqq.build("mqq.device.isMobileQQ",{iOS:function(a){var b=mqq.iOS;return a?a(b):b},android:function(a){var b=mqq.android;return a?a(b):b},browser:function(a){var b=mqq.android||mqq.iOS;return a?a(b):b},support:{iOS:"4.2",android:"4.2"}}),mqq.build("mqq.device.setScreenStatus",{iOS:function(a,b){a=a||{},a.callback=mqq.callback(b),mqq.invoke("device","setScreenStatus",a)},android:function(a,b){a=a||{},a.callback=mqq.callback(b),mqq.invoke("device","setScreenStatus",a)},support:{android:"5.0"}}),mqq.build("mqq.media.getLocalImage",{iOS:function(a,b){a.callback=mqq.callback(b,!0,!0),mqq.invoke("media","getLocalImage",a)},android:function(a,b){a.callback=mqq.callback(b),mqq.invoke("media","getLocalImage",a)},support:{iOS:"4.7.2",android:"4.7.2"}}),mqq.build("mqq.media.getPicture",{iOS:function(a,b){!a.outMaxWidth&&a.maxWidth&&(a.outMaxWidth=a.maxWidth,delete a.maxWidth),!a.outMaxHeight&&a.maxHeight&&(a.outMaxHeight=a.maxHeight,delete a.maxHeight),a.callback=mqq.callback(function(a,c){c&&c.forEach&&c.forEach(function(a,b){"string"==typeof a&&(c[b]={data:a,imageID:"",match:0})}),b&&b(a,c)},!0,!0),mqq.invoke("media","getPicture",a)},android:function(a,b){a.callback=mqq.callback(b),mqq.invoke("media","getPicture",a)},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.media.playLocalSound",{iOS:function(a){mqq.invoke("sensor","playLocalSound",a)},android:function(a){mqq.invoke("qbizApi","playVoice",a.bid,a.url)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.media.preloadSound",{iOS:function(a,b){a.callback=mqq.callback(b,!0),mqq.invoke("sensor","preloadSound",a)},android:function(a,b){mqq.invoke("qbizApi","preloadVoice",a.bid,a.url,mqq.callback(b,!0))},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.media.saveImage",{iOS:function(a,b){a.callback=mqq.callback(b),mqq.invoke("media","saveImage",a)},android:function(a,b){a.callback=mqq.callback(b),mqq.invoke("media","saveImage",a)},support:{iOS:"5.1",android:"5.2"}}),mqq.build("mqq.media.showPicture",{iOS:function(a){mqq.invoke("troopNotice","showPicture",a)},android:function(a){mqq.invoke("troopNotice","showPicture",a)},support:{iOS:"5.0",android:"5.0"}}),mqq.build("mqq.offline.checkUpdate",{iOS:function(a,b){var c=mqq.callback(b);c&&(a.callback=c,mqq.invoke("offline","checkUpdate",a))},android:function(a,b){mqq.invoke("qbizApi","checkUpdate",a.bid,mqq.callback(b))},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.offline.downloadUpdate",{iOS:function(a,b){var c=mqq.callback(b);c&&(a.callback=c,mqq.invoke("offline","downloadUpdate",a))},android:function(a,b){var c=mqq.callback(b);a.fileSize&&a.fileSize>0?mqq.invoke("qbizApi","forceUpdate",a.bid,a.url,a.fileSize,c):mqq.invoke("qbizApi","forceUpdate",a.bid,a.url,c)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.offline.isCached",{iOS:function(a,b){var c=mqq.callback(b);c&&(a.callback=c,mqq.invoke("offline","isCached",a))},android:function(a,b){mqq.invoke("qbizApi","isCached",a.bid,mqq.callback(b))
},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.pay.enablePay",{iOS:function(a){mqq.invoke("pay","enablePay",{params:a})},support:{iOS:"4.6"}}),mqq.build("mqq.pay.pay",{iOS:function(a,b){var c=b?mqq.callback(b):null;mqq.invoke("pay","pay",{params:a,callback:c})},support:{iOS:"4.6"}}),mqq.build("mqq.redpoint.getAppInfo",{iOS:function(a,b){var c=mqq.callback(b);c&&(a.callback=c),mqq.invoke("redpoint","getAppInfo",a)},android:function(a,b){var c=mqq.callback(b);c&&(a.callback=c),mqq.invoke("redpoint","getAppInfo",a)},support:{iOS:"4.7",android:"4.7"}}),function(){function a(a){var b=null;if(e===!1&&(e=""==location.search?""==location.hash?"":location.hash.substring(1):location.search.substring(1),e=e.split("&"),e.length>0))for(var c=0;c<e.length;c++)if(b=e[c],b=b.split("="),b.length>1)try{f[b[0]]=decodeURIComponent(b[1])}catch(d){f[b[0]]=""}return"undefined"!=typeof f[a]?f[a]:""}function b(){return"UID_"+ ++m}function c(a,b){var c={sid:g,appid:a.substring(a.lastIndexOf(".")+1),platid:h,qqver:i,format:"json",_:(new Date).getTime()},d="get_new_msg_cnt";try{Zepto.ajax({type:"get",url:j+d,dataType:"json",data:c,timeout:1e4,success:function(a){var c={ret:a.ecode,count:0};0==a.ecode&&(c.count=a.new_msg_cnt),l[b].call(null,c),delete l[b]},error:function(){l[b].call(null,{ret:-1,list:[]}),delete l[b]}})}catch(e){l[b].call(null,{ret:-2,list:[]}),delete l[b]}}function d(a,b){if(0==a.code){var c={ret:a.code,count:0},d=a.data.buffer;if(d="object"!=typeof d&&""!=d?JSON.parse(d):d,"undefined"!=typeof d.msg)for(var e in d.msg)1==d.msg[e].stat&&c.count++;l[b].call(null,c)}else l[b].call(null,{ret:a.code,list:[]});delete l[b]}var e=!1,f={},g=a("sid"),h=mqq.iOS?110:mqq.android?109:0,i=mqq.QQVersion?mqq.QQVersion:"",j="http://msg.vip.qq.com/cgi-bin/",k=function(){return mqq.compare("4.7")>=0}(),l={},m=1;mqq.build("mqq.redpoint.getNewMsgCnt",{iOS:function(a,e){appid=String(a.path);var f=b();if(l[f]=e,k)mqq.redpoint.getAppInfo(a,function(a){d(a,f)});else{if(!Zepto)return void("function"==typeof e?e({ret:-1e4,count:0}):null);c(appid,f)}},android:function(a,e){appid=String(a.path);var f=b();if(l[f]=e,k)mqq.redpoint.getAppInfo(a,function(a){d(a,f)});else{if(!Zepto)return void("function"==typeof e?e({ret:-1e4,count:0}):null);c(appid,f)}},support:{iOS:"4.5",android:"4.5"}})}(),function(){function a(a){var b=null;if(e===!1&&(e=""==location.search?""==location.hash?"":location.hash.substring(1):location.search.substring(1),e=e.split("&"),e.length>0))for(var c=0;c<e.length;c++)if(b=e[c],b=b.split("="),b.length>1)try{f[b[0]]=decodeURIComponent(b[1])}catch(d){f[b[0]]=""}return"undefined"!=typeof f[a]?f[a]:""}function b(){return"UID_"+ ++m}function c(a,b){var c={sid:g,appid:a.substring(a.lastIndexOf(".")+1),platid:h,qqver:i,format:"json",_:(new Date).getTime()},d="read_msg";try{Zepto.ajax({type:"get",url:j+d,dataType:"json",data:c,timeout:1e4,success:function(a){var c={ret:a.ecode,list:[]};if(0==a.ecode){var d=a.msg,e=[];for(var f in d)e.push({content:d[f].content?d[f].content:"",link:d[f].link?d[f].link:"",img:d[f].img?d[f].img:"",pubTime:d[f].time?d[f].time:"",title:d[f].title?d[f].title:"",src:d[f].src?d[f].src:"",ext1:d[f].ext1?d[f].ext1:"",ext2:d[f].ext2?d[f].ext2:"",ext3:d[f].ext3?d[f].ext3:"",id:f});c.list=e}l[b].call(null,c),delete l[b]},error:function(){l[b].call(null,{ret:-1,list:[]}),delete l[b]}})}catch(e){l[b].call(null,{ret:-2,list:[]}),delete l[b]}}function d(a,b){if(0==a.code){var c={ret:a.code,list:[]},d=a.data.buffer,e=[];if(d="object"!=typeof d&&""!=d?JSON.parse(d):d,"undefined"!=typeof d.msg){for(var f in d.msg)1==d.msg[f].stat&&(e.push({content:d.msg[f].content?d.msg[f].content:"",link:d.msg[f].link?d.msg[f].link:"",img:d.msg[f].img?d.msg[f].img:"",pubTime:d.msg[f].time?d.msg[f].time:"",title:d.msg[f].title?d.msg[f].title:"",src:d.msg[f].src?d.msg[f].src:"",ext1:d.msg[f].ext1?d.msg[f].ext1:"",ext2:d.msg[f].ext2?d.msg[f].ext2:"",ext3:d.msg[f].ext3?d.msg[f].ext3:"",id:f}),d.msg[f].stat=2);if(a.data.buffer=JSON.stringify(d),e.length>0){c.list=e,mqq.redpoint.setAppInfo({appInfo:a.data},function(a){console.log(JSON.stringify(a))});var k=a.data.appID,m={sid:g,appid:k,platid:h,qqver:i,format:"json",_:(new Date).getTime()},n="read_msg";try{Zepto.ajax({type:"get",url:j+n,dataType:"json",data:m,timeout:1e4,success:function(){},error:function(){}})}catch(o){}}}l[b].call(null,c)}else l[b].call(null,{ret:a.code,list:[]});delete l[b]}var e=!1,f={},g=a("sid"),h=mqq.iOS?110:mqq.android?109:0,i=mqq.QQVersion?mqq.QQVersion:"",j="http://msg.vip.qq.com/cgi-bin/",k=function(){return mqq.compare("4.7")>=0}(),l={},m=1;mqq.build("mqq.redpoint.getNewMsgList",{iOS:function(a,e){appid=String(a.path);var f=b();if(l[f]=e,k)mqq.redpoint.getAppInfo(a,function(a){d(a,f)});else{if(!Zepto)return void("function"==typeof e?e({ret:-1e4,count:0}):null);c(appid,f)}},android:function(a,e){appid=String(a.path);var f=b();if(l[f]=e,k)mqq.redpoint.getAppInfo(a,function(a){d(a,f)});else{if(!Zepto)return void("function"==typeof e?e({ret:-1e4,count:0}):null);c(appid,f)}},support:{iOS:"4.5",android:"4.5"}})}(),mqq.build("mqq.redpoint.getRedPointShowInfo",{iOS:function(a,b){var c=mqq.callback(b);c&&(a.callback=c),mqq.invoke("redpoint","getRedPointShowInfo",a)},android:function(a,b){var c=mqq.callback(b);c&&(a.callback=c),mqq.invoke("redpoint","getRedPointShowInfo",a)},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.redpoint.reportRedTouch",{iOS:function(a,b){var c=mqq.callback(b);c&&(a.callback=c),mqq.invoke("redpoint","reportRedTouch",a)},android:function(a,b){var c=mqq.callback(b);c&&(a.callback=c),mqq.invoke("redpoint","reportRedTouch",a)},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.redpoint.setAppInfo",{iOS:function(a,b){var c=mqq.callback(b);c&&(a.callback=c),mqq.invoke("redpoint","setAppInfo",a)},android:function(a,b){var c=mqq.callback(b);c&&(a.callback=c),mqq.invoke("redpoint","setAppInfo",a)},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.sensor.getLocation",{iOS:function(a){return mqq.invoke("data","queryCurrentLocation",{callback:mqq.callback(a)})},android:function(a){var b=mqq.callback(function(b){var c=-1,d=null,e=null;b&&"null"!==b&&(b=(b+"").split(","),2===b.length&&(c=0,d=parseFloat(b[0]||0),e=parseFloat(b[1]||0))),a(c,e,d)},!0);mqq.invoke("publicAccount","getLocation",b)},browser:function(a){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(b){var c=b.coords.latitude,d=b.coords.longitude;a(0,c,d)},function(){a(-1)}):a(-1)},support:{iOS:"4.5",android:"4.6",browser:"0"}}),mqq.build("mqq.sensor.getRealLocation",{iOS:function(a,b){var c=b?mqq.callback(b):null;return mqq.invoke("data","getOSLocation",{params:a,callback:c})},android:function(a,b){a=JSON.stringify(a||{}),mqq.invoke("publicAccount","getRealLocation",a,mqq.callback(b,!0))},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.sensor.getSensorStatus",{iOS:function(a,b){a=a||{type:"gps"},a.callbackName=mqq.callback(b),mqq.invoke("sensor","getSensorStatus",a)},support:{iOS:"4.7"}}),mqq.build("mqq.sensor.startAccelerometer",{iOS:function(a){var b=mqq.callback(a,!1,!0);b&&mqq.invoke("sensor","startAccelerometer",{callback:b})},android:function(a){var b=mqq.callback(a,!1,!0);mqq.invoke("qbizApi","startAccelerometer",b)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.sensor.startCompass",{iOS:function(a){var b=mqq.callback(a,!1,!0);b&&mqq.invoke("sensor","startCompass",{callback:b})},android:function(a){var b=mqq.callback(a,!1,!0);mqq.invoke("qbizApi","startCompass",b)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.sensor.startListen",{iOS:function(a){var b=mqq.callback(a,!1,!0);b&&mqq.invoke("sensor","startListen",{callback:b})},android:function(a){var b=mqq.callback(a,!1,!0);mqq.invoke("qbizApi","startListen",b)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.sensor.stopAccelerometer",{iOS:function(){mqq.invoke("sensor","stopAccelerometer")},android:function(){mqq.invoke("qbizApi","stopAccelerometer")},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.sensor.stopCompass",{iOS:function(){mqq.invoke("sensor","stopCompass")},android:function(){mqq.invoke("qbizApi","stopCompass")},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.sensor.stopListen",{iOS:function(){mqq.invoke("sensor","stopListen")},android:function(){mqq.invoke("qbizApi","stopListen")},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.sensor.vibrate",{iOS:function(a){a=a||{},mqq.invoke("sensor","vibrate",a)},android:function(a){a=a||{},mqq.invoke("qbizApi","phoneVibrate",a.time)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.tenpay.buyGoods",{android:function(a,b){mqq.invoke("pay","buyGoods",JSON.stringify(a),b)},support:{android:"4.6.1"}}),mqq.build("mqq.tenpay.isOpenSecurityPay",{android:function(a,b){var a={};b&&(a.callback=mqq.callback(b)),mqq.invoke("qw_charge","qqpimsecure_safe_isopen_securitypay",a)},support:{android:"5.3.0"}}),mqq.build("mqq.tenpay.openService",{android:function(a,b){mqq.invoke("pay","openService",JSON.stringify(a),b)},support:{android:"4.6.1"}}),mqq.build("mqq.tenpay.openTenpayView",{iOS:function(a,b){var c=b?mqq.callback(b):null;mqq.invoke("pay","openTenpayView",{params:a,callback:c})},android:function(a,b){mqq.invoke("pay","openTenpayView",JSON.stringify(a),b)},support:{iOS:"4.6.1",android:"4.6.1"}}),function(){var a=function(a){return function(b,c,d){if(d)try{return void(a&&a(JSON.parse(d)))}catch(e){}b=Number(b);var f={resultCode:b,retmsg:"",data:{}};if(0===b){var g=c;c=mqq.mapQuery(c),c.sp_data=g,c.attach&&0===c.attach.indexOf("{")&&(c.attach=JSON.parse(c.attach)),c.time_end&&(c.pay_time=c.time_end),f.data=c}else 1===b||-1===b?(f.retmsg="用户主动放弃支付",f.resultCode=-1):f.retmsg=c;a&&a(f)}};mqq.build("mqq.tenpay.pay",{iOS:function(b,c){b.order_no=b.tokenId||b.tokenID,b.app_info=b.app_info||b.appInfo,mqq.compare("4.6.2")>=0?mqq.invokeSchema("mqqapi","wallet","pay",b,a(c)):mqq.invokeSchema("mqqapiwallet","wallet","pay",b,a(c))},android:function(b,c){b.token_id=b.tokenId||b.tokenID,b.app_info=b.app_info||b.appInfo,mqq.compare("4.6.1")>=0?mqq.invoke("pay","pay",JSON.stringify(b),c):mqq.invokeSchema("mqqapi","tenpay","pay",b,a(c))},support:{iOS:"4.6.1",android:"4.6.1"}})}(),mqq.build("mqq.tenpay.rechargeGameCurrency",{android:function(a,b){mqq.invoke("pay","rechargeGameCurrency",JSON.stringify(a),b)},support:{android:"4.6.1"}}),mqq.build("mqq.tenpay.rechargeQb",{iOS:function(a,b){mqq.invoke("tenpay","rechargeQb",JSON.stringify(a),b)},android:function(a,b){mqq.invoke("pay","rechargeQb",JSON.stringify(a),b)},support:{iOS:"5.4",android:"4.6.1"}}),mqq.build("mqq.ui.closeWebViews",{iOS:function(a){mqq.invoke("ui","closeWebViews",a||{})},android:function(a){mqq.invoke("ui","closeWebViews",a||{})},support:{iOS:"5.2",android:"5.2"}}),mqq.build("mqq.ui.openAIO",{iOS:function(a){mqq.invokeSchema("mqqapi","im","chat",a)},android:function(a){mqq.invokeSchema("mqqapi","im","chat",a)},support:{iOS:"4.5",android:"4.5"}}),mqq.build("mqq.ui.openGroupFileView",{iOS:function(a){mqq.invoke("ui","openGroupFileView",a)},android:function(a){mqq.invoke("ui","openSpecialView",{viewName:"groupFile",param:a})},support:{iOS:"5.4",android:"5.4"}}),mqq.build("mqq.ui.openGroupPhotoView",{iOS:function(a){mqq.invoke("ui","openGroupPhotoView",a)},android:function(a){mqq.invoke("ui","openSpecialView",{viewName:"groupPhoto",param:a})},support:{iOS:"5.4",android:"5.4"}}),mqq.build("mqq.ui.openUrl",{iOS:function(a){switch(a||(a={}),a.target){case 0:window.open(a.url,"_self");break;case 1:a.styleCode={1:4,2:2,3:5}[a.style]||1,mqq.invoke("nav","openLinkInNewWebView",{url:a.url,options:a});break;case 2:mqq.invoke("nav","openLinkInSafari",{url:a.url})}},android:function(a){2===a.target?mqq.compare("4.6")>=0?mqq.invoke("publicAccount","openInExternalBrowser",a.url):mqq.compare("4.5")>=0&&mqq.invoke("openUrlApi","openUrl",a.url):1===a.target?(a.style||(a.style=0),mqq.compare("4.7")>=0?mqq.invoke("ui","openUrl",{url:a.url,options:a}):mqq.compare("4.6")>=0?mqq.invoke("qbizApi","openLinkInNewWebView",a.url,a.style):mqq.compare("4.5")>=0?mqq.invoke("publicAccount","openUrl",a.url):location.href=a.url):location.href=a.url},browser:function(a){2===a.target?window.open(a.url,"_blank"):location.href=a.url},support:{iOS:"4.5",android:"4.6",browser:"0"}}),function(){var a={},b={Abount:"com.tencent.mobileqq.activity.AboutActivity",GroupTribePublish:"com.tencent.mobileqq.troop.activity.TroopBarPublishActivity",GroupTribeReply:"com.tencent.mobileqq.troop.activity.TroopBarReplyActivity",GroupTribeComment:"com.tencent.mobileqq.troop.activity.TroopBarCommentActivity"};mqq.build("mqq.ui.openView",{iOS:function(b){b.name=a[b.name]||b.name,"function"==typeof b.onclose&&(b.onclose=mqq.callback(b.onclose)),mqq.invoke("nav","openViewController",b)},android:function(a){a.name=b[a.name]||a.name,"function"==typeof a.onclose&&(a.onclose=mqq.callback(a.onclose)),mqq.compare("5.0")>-1?mqq.invoke("ui","openView",a):mqq.invoke("publicAccount","open",a.name)},support:{iOS:"4.5",android:"4.6"}})}(),mqq.build("mqq.ui.pageVisibility",{iOS:function(a){mqq.invoke("ui","pageVisibility",a)},android:function(a){mqq.invoke("ui","pageVisibility",a)},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.ui.popBack",{iOS:function(){mqq.invoke("nav","popBack")},android:function(){mqq.invoke("publicAccount","close")},support:{iOS:"4.5",android:"4.6"}}),mqq.build("mqq.ui.refreshTitle",{iOS:function(){mqq.invoke("nav","refreshTitle")},support:{iOS:"4.6"}}),mqq.build("mqq.ui.returnToAIO",{iOS:function(){mqq.invoke("nav","returnToAIO")},android:function(){mqq.invoke("qbizApi","returnToAIO")},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.ui.scanQRcode",{iOS:function(a,b){a=a||{},b&&(a.callback=mqq.callback(b)),mqq.invoke("ui","scanQRcode",a)},android:function(a,b){a=a||{},b&&(a.callback=mqq.callback(b)),mqq.invoke("ui","scanQRcode",a)},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.ui.setActionButton",{iOS:function(a,b){"object"!=typeof a&&(a={title:a});var c=mqq.callback(b,!1,!0);a.callback=c,mqq.invoke("nav","setActionButton",a)},android:function(a,b){var c=mqq.callback(b);a.hidden&&(a.title=""),mqq.compare("4.7")>=0?(a.callback=c,mqq.invoke("ui","setActionButton",a)):mqq.invoke("publicAccount","setRightButton",a.title,"",c||null)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.ui.setLoading",{iOS:function(a){a&&(a.visible===!0?mqq.invoke("nav","showLoading"):a.visible===!1&&mqq.invoke("nav","hideLoading"),a.color&&mqq.invoke("nav","setLoadingColor",{r:a.color[0],g:a.color[1],b:a.color[2]}))},android:function(a){"visible"in a&&(a.visible?mqq.invoke("publicAccount","showLoading"):mqq.invoke("publicAccount","hideLoading"))},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.ui.setOnCloseHandler",{iOS:function(a){mqq.invoke("ui","setOnCloseHandler",{callback:mqq.callback(a,!1,!0)})},android:function(a){mqq.invoke("ui","setOnCloseHandler",{callback:mqq.callback(a)})},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.ui.setOnShareHandler",{iOS:function(a){mqq.invoke("nav","addWebShareListener",{callback:mqq.callback(a,!1,!0)})},android:function(a){mqq.invoke("ui","setOnShareHandler",{callback:mqq.callback(a,!1,!0)})},support:{iOS:"4.7.2",android:"4.7.2"}}),mqq.build("mqq.ui.setPullDown",{iOS:function(a){mqq.invoke("ui","setPullDown",a)},android:function(a){mqq.invoke("ui","setPullDown",a)},support:{iOS:"5.3",android:"5.3"}}),mqq.build("mqq.ui.setRightDragToGoBackParams",{iOS:function(a){mqq.invoke("ui","setRightDragToGoBackParams",a)},support:{iOS:"5.3"}}),mqq.build("mqq.ui.setTitleButtons",{iOS:function(a){var b=a.left,c=a.right;b&&(b.callback=mqq.callback(b.callback,!1,!0)),c&&(c.callback=mqq.callback(c.callback,!1,!0)),mqq.compare("5.3")>=0?mqq.invoke("ui","setTitleButtons",a):(b&&(b.title&&mqq.invoke("ui","setLeftBtnTitle",{title:b.title}),b.callback&&mqq.invoke("ui","setOnCloseHandler",b)),c&&mqq.invoke("nav","setActionButton",c))},android:function(a){var b=a.left,c=a.right;b&&(b.callback=mqq.callback(b.callback)),c&&(c.callback=mqq.callback(c.callback)),mqq.compare("5.3")>=0?mqq.invoke("ui","setTitleButtons",a):(b&&b.callback&&mqq.invoke("ui","setOnCloseHandler",b),c&&(c.hidden&&(c.title=""),mqq.compare("4.7")>=0?mqq.invoke("ui","setActionButton",c):mqq.invoke("publicAccount","setRightButton",c.title,"",c.callback)))},support:{iOS:"5.0",android:"4.6"}}),mqq.build("mqq.ui.setWebViewBehavior",{iOS:function(a){mqq.invoke("ui","setWebViewBehavior",a)},android:function(a){mqq.invoke("ui","setWebViewBehavior",a)},support:{iOS:"4.7.2",android:"5.1"}}),mqq.build("mqq.ui.shareAudio",{iOS:function(a,b){var c=mqq.callback(b,!0);a.desc&&(a.desc=a.desc.length>50?a.desc.substring(0,50)+"...":a.desc),mqq.invoke("nav","shareAudio",{params:a,callback:c})},android:function(a,b){a.req_type=2,b&&(a.callback=mqq.callback(b,!0)),a.desc&&(a.desc=a.desc.length>50?a.desc.substring(0,50)+"...":a.desc),mqq.invoke("QQApi","shareMsg",a)},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.ui.shareMessage",{iOS:function(a,b){!("needPopBack"in a)&&"back"in a&&(a.needPopBack=a.back),a.share_url&&(a.share_url=mqq.removeQuery(a.share_url,["sid","3g_sid"])),a.desc&&(a.desc=a.desc.length>50?a.desc.substring(0,50)+"...":a.desc),a.callback=mqq.callback(b,!0,!0),mqq.invoke("nav","shareURLWebRichData",a)},android:function(a,b){if(a.share_url&&(a.share_url=mqq.removeQuery(a.share_url,["sid","3g_sid"])),a.callback=mqq.callback(function(a){b&&b({retCode:a?0:1})},!0),a.desc&&(a.desc=a.desc.length>50?a.desc.substring(0,50)+"...":a.desc),a.share_type&&(2===a.share_type||3===a.share_type)&&mqq.compare("5.2")<0&&mqq.support("mqq.app.isAppInstalled")){var c="您尚未安装微信，不可使用此功能";mqq.app.isAppInstalled("com.tencent.mm",function(b){b?mqq.invoke("QQApi","shareMsg",a):mqq.support("mqq.ui.showTips")?mqq.ui.showTips({text:c}):alert(c)})}else mqq.invoke("QQApi","shareMsg",a)},support:{iOS:"4.7.2",android:"4.7.2"}}),mqq.build("mqq.ui.shareRichMessage",{iOS:function(a,b){a.puin=a.oaUin,a.desc=a.desc||a.summary,a.share_url&&(a.share_url=mqq.removeQuery(a.share_url,["sid","3g_sid"])),a.desc&&(a.desc=a.desc.length>50?a.desc.substring(0,50)+"...":a.desc),a.callback=mqq.callback(b),mqq.invoke("nav","officalAccountShareRichMsg2QQ",a)},android:function(a,b){a.puin=a.oaUin,a.desc=a.desc||a.summary,a.desc&&(a.desc=a.desc.length>50?a.desc.substring(0,50)+"...":a.desc),mqq.compare("5.0")>=0?(a.share_url=a.share_url||a.targetUrl,a.image_url=a.image_url||a.imageUrl,a.share_url&&(a.share_url=mqq.removeQuery(a.share_url,["sid","3g_sid"])),a.callback=b?mqq.callback(function(a){b({ret:a?0:1})}):null,mqq.invoke("QQApi","shareMsg",a)):(a.targetUrl=a.targetUrl||a.share_url,a.imageUrl=a.imageUrl||a.image_url,a.targetUrl&&(a.targetUrl=mqq.removeQuery(a.targetUrl,["sid","3g_sid"])),a.callback=mqq.callback(b),mqq.invoke("publicAccount","officalAccountShareRichMsg2QQ",a))},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.data.shareRichMessage",{iOS:mqq.ui.shareRichMessage,android:mqq.ui.shareRichMessage,support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.ui.showActionSheet",{iOS:function(a,b){return b&&(a.onclick=mqq.callback(b,!1,!0)),mqq.invoke("ui","showActionSheet",a)},android:function(a,b){return b&&(a.onclick=mqq.callback(b)),mqq.invoke("ui","showActionSheet",a)},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.ui.showDialog",{iOS:function(a,b){a&&(a.callback=mqq.callback(b,!0,!0),a.title=a.title+"",a.text=a.text+"","needOkBtn"in a||(a.needOkBtn=!0),"needCancelBtn"in a||(a.needCancelBtn=!0),a.okBtnStr=a.okBtnText,a.cancelBtnStr=a.cancelBtnText,mqq.invoke("nav","showDialog",a))},android:function(a,b){if(mqq.compare("4.8.0")>=0)a.callback=mqq.callback(b,!0),mqq.invoke("ui","showDialog",a);else{var c="",d="";b&&(c=mqq.callback(function(){b({button:0})},!0),d=mqq.callback(function(){b({button:1})},!0),c+="()",d+="()"),a.title=a.title+"",a.text=a.text+"","needOkBtn"in a||(a.needOkBtn=!0),"needCancelBtn"in a||(a.needCancelBtn=!0),mqq.invoke("publicAccount","showDialog",a.title,a.text,a.needOkBtn,a.needCancelBtn,c,d)}},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.ui.showEQQ",{iOS:function(a){mqq.invoke("nav","showBusinessAccountProfile",a)},android:function(a){mqq.invoke("eqq","showEQQ",a)},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.ui.showOfficalAccountDetail",{iOS:function(a){var b="object"==typeof a?a:{uin:a};mqq.invoke("nav","showOfficalAccountDetail",b)},android:function(a){mqq.compare("4.6")>=0?mqq.invoke("publicAccount","viewAccount",a.uin,a.showAIO):mqq.invoke("publicAccount","viewAccount",a.uin)},support:{iOS:"4.5",android:"4.6"}}),mqq.build("mqq.ui.showProfile",{iOS:function(a){mqq.compare("4.7")>=0?mqq.invoke("nav","showProfile",a):mqq.compare("4.6")>=0&&!a.uinType?mqq.invoke("nav","showProfile",a):(1===a.uinType&&(a.card_type="group"),mqq.invokeSchema("mqqapi","card","show_pslcard",a))},android:function(a){mqq.compare("4.7")>=0?mqq.invoke("publicAccount","showProfile",a):mqq.compare("4.6")>=0&&!a.uinType?mqq.invoke("publicAccount","showProfile",a.uin):(1===a.uinType&&(a.card_type="group"),mqq.invokeSchema("mqqapi","card","show_pslcard",a))},support:{iOS:"4.5",android:"4.5"}}),mqq.build("mqq.ui.showShareMenu",{iOS:function(){mqq.invoke("ui","showShareMenu")},android:function(){mqq.invoke("ui","showShareMenu")},support:{iOS:"5.2",android:"5.2"}}),mqq.build("mqq.ui.showTips",{iOS:function(a){mqq.invoke("ui","showTips",a)},android:function(a){mqq.invoke("ui","showTips",a)},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.viewTracks.getTrackInfo",{iOS:function(a,b){a=a||{};var c=mqq.callback(b);c&&(a.callback=c),mqq.invoke("viewTracks","getTrackInfo",a)},android:function(a,b){a=a||{};var c=mqq.callback(b);c&&(a.callback=c),mqq.invoke("viewTracks","getTrackInfo",a)},support:{iOS:"5.1",android:"5.1"}}),mqq.build("mqq.viewTracks.pop",{iOS:function(a,b){a=a||{};var c=mqq.callback(b);c&&(a.callback=c),mqq.invoke("viewTracks","pop",a)},android:function(a,b){a=a||{};var c=mqq.callback(b);c&&(a.callback=c),mqq.invoke("viewTracks","pop",a)},support:{iOS:"5.1",android:"5.1"}}),mqq.build("mqq.viewTracks.push",{iOS:function(a,b){var c=mqq.callback(b);c&&(a.callback=c),mqq.invoke("viewTracks","push",a)},android:function(a,b){var c=mqq.callback(b);c&&(a.callback=c),mqq.invoke("viewTracks","push",a)},support:{iOS:"5.1",android:"5.1"}});